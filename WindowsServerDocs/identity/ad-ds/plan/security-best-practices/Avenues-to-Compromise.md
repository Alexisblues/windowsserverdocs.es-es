---
ms.assetid: d7a4d2e1-217d-4ffc-93f0-817149bd9e7f
title: "Vías peligro"
description: 
author: billmath
ms.author: billmath
manager: femila
ms.date: 05/31/2017
ms.topic: article
ms.prod: windows-server-threshold
ms.technology: identity-adds
ms.openlocfilehash: 149a3e4bb2ce4558e40425e42ecfdeec2c5dfcb7
ms.sourcegitcommit: 78d8839ccafa9530784cb9e38c3127ed2c215423
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/09/2018
---
# <a name="avenues-to-compromise"></a>Vías peligro

>Se aplica a: Windows Server 2016, Windows Server 2012 R2, Windows Server 2012

*Ley número siete: la red más segura es muy bien administrada.* - [10 inmutables de administración de seguridad](https://technet.microsoft.com/library/cc722488.aspx)  
  
En las organizaciones que experimentaron compromiso catastrófico eventos, evaluaciones normalmente revelan que las organizaciones tienen limitada visibilidad en el estado real de sus infraestructuras de TI pueden diferir notablemente de sus Estados "como se indica". Estas variaciones introducen vulnerabilidades que exponen el entorno para poner en peligro, a menudo con mínimo riesgo de detección hasta que se pongan en peligro ha progresado hasta el punto en el que los atacantes eficazmente "poseen" el entorno.  
  
Evaluaciones detalladas de la configuración de AD DS de estas organizaciones, infraestructuras de clave públicas (PKI), los servidores, las estaciones de trabajo, aplicaciones, control de acceso (ACL) y otras tecnologías para mostrar errores de configuración y las vulnerabilidades que, si remediado, podrían haber impide peligro inicial.  
  
Análisis de documentación, procesos y procedimientos de TI identifica las vulnerabilidades introducidas por intervalos de las prácticas administrativas que se han aprovechado por atacantes para obtener privilegios que se usaron para poner en peligro el bosque de Active Directory. Un bosque completamente comprometido es uno en el que los atacantes poner en peligro no solo los sistemas individuales, aplicaciones o cuentas de usuario, pero escalen su acceso para obtener un nivel de privilegio que puedes modificar o destruir todos los aspectos del bosque. Cuando una instalación de Active Directory ha habido algún riesgo para que grados, los atacantes pueden realizar cambios que permiten mantener una presencia en todo el entorno o peor, destruir el directorio y los sistemas y cuentas administra.  
  
Aunque un número de las vulnerabilidades en las descripciones que siguen explotados normalmente no es ataques contra Active Directory, permiten que los atacantes establecer establecerse en un entorno que permite ejecutar ataques (también denominado elevación de privilegios) de escalación de privilegios y finalmente de destino y poner en peligro AD DS.  
  
Esta sección de este documento se centra en describir los mecanismos que los atacantes suelen usan para obtener acceso a la infraestructura y, finalmente, para iniciar ataques de elevación de privilegios. Consulta también las siguientes secciones:  
  
-   [Reducir la superficie de ataque Active Directory](../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/Reducing-the-Active-Directory-Attack-Surface.md) detallada recomendaciones para la configuración de seguridad de Active Directory.  
  
-   [Supervisión de Active Directory para signos de poner en peligro](../../../ad-ds/plan/security-best-practices/Monitoring-Active-Directory-for-Signs-of-Compromise.md) recomendaciones para ayudar a detectar compromiso  
  
-   [Planeación de comprometer](../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/Planning-for-Compromise.md) enfoques de alto nivel para ayudar a preparar ataques contra la infraestructura de TI y perspectivas empresariales  
  
> [!NOTE]  
> Aunque este documento se centra en los sistemas de Active Directory y Windows que forman parte de un dominio de AD DS, los atacantes rara vez se centran únicamente en Active Directory y Windows. En entornos con una combinación de sistemas operativos, directorios, aplicaciones y repositorios de datos, es común encontrar que no sean Windows sistemas también han puesto en riesgo. Esto es especialmente cierto si los sistemas proporcionan un "puente" entre Windows y entornos no son de Windows, como los servidores de archivos que se accede a Windows y UNIX o clientes de Linux, directorios que proporcionan servicios de autenticación para varios sistemas operativos o metadirectorios que sincronizarán los datos en directorios diferentes.  
>   
> AD DS es objetivo debido a las funcionalidades de administración centralizadas de un acceso y configuración proporciona no solo a los sistemas Windows, sino también a otros clientes. Cualquier otro directorio o aplicación que proporciona la autenticación y la configuración de servicios de administración puede y será el destino de determinados atacantes. Aunque este documento se centra en las protecciones que pueden reducir la probabilidad de que un compromiso de instalaciones de Active Directory, cada organización que incluya equipos no son de Windows, también deben preparar repositorios directorios, aplicaciones o datos ataques contra los sistemas.  
  
## <a name="initial-breach-targets"></a>Destinos de incumplimiento inicial  
Nadie intencionadamente crea una infraestructura informática que se expone a la organización ponga en peligro. Cuando se construye un bosque de Active Directory por primera vez, suele impecables y actual. Como pasan de años y se adquieren nuevos sistemas operativos y aplicaciones, se agregan en el bosque. Tal como se reconocen las ventajas de facilidad de uso que proporciona Active Directory, se agrega contenido más y más en el directorio, más personas integran sus equipos o aplicaciones con AD DS y dominios se actualizan para admitir la nueva funcionalidad que ofrece las últimas versiones del sistema operativo Windows. Sin embargo, lo que sucede también con el tiempo, es que incluso como una nueva infraestructura es que se agregan, es posible que otras partes de la infraestructura no se mantendrá así como fueran inicialmente, sistemas y aplicaciones funcionan correctamente y, por tanto, no recibe atención y empezar a las organizaciones olvidarse de que no se eliminan su infraestructura existente. En función de lo que vemos en la evaluación de infraestructuras en peligro, los más antiguos, más grande y más compleja del entorno, es más probable es que hay varias instancias de vulnerabilidades explotadas habitualmente.  
  
Independientemente de los motivos del atacante, la mayoría de las infracciones de seguridad de información se inicia con el compromiso de uno o dos sistemas a la vez. Estos eventos iniciales, o puntos de entrada a la red, a menudo aprovechan las vulnerabilidades que se han corregido podrían, pero no. La [2012 datos incumplimiento investigaciones informe (DBIR)](http://www.verizonbusiness.com/resources/reports/rp_data-breach-investigations-report-2012_en_xg.pdf), que es un buen exponente anual producida por el equipo de riesgos Verizon en colaboración con un número de agencias nacional de seguridad y otras empresas, los Estados que 96 por ciento de los ataques estaban "no muy difícil" y que "97% de infracciones pueden evitar por controles simples o intermedios." Estos resultados pueden ser consecuencia directa de las vulnerabilidades habitualmente explotadas que siguen.  
  
### <a name="gaps-in-antivirus-and-antimalware-deployments"></a>Carencias de Antivirus y Antimalware implementaciones  
*Ley número ocho: un examen de malware obsoletos solo es ligeramente mejor que ningún escáner en absoluto.* - [Diez inmutables de seguridad (versión 2.0)](https://technet.microsoft.com/security/hh278941.aspx)  
  
Análisis de implementaciones de antivirus y antimalware de las organizaciones a menudo pone un entorno en el que la mayoría de las estaciones de trabajo están configurados con un software antivirus y antimalware que está habilitada y actual. Por lo general, las excepciones son estaciones de trabajo que se conectan con poca frecuencia a los dispositivos corporativos de entorno o un empleado para qué antivirus y antimalware software puede ser difícil de implementar, configurar y actualizar.  
  
Las poblaciones de servidor, sin embargo, suelen ser que menos protegido coherente en muchos entornos en peligro. Según se indica en la [2012 datos incumplimiento investigaciones](http://www.verizonbusiness.com/resources/reports/rp_data-breach-investigations-report-2012_en_xg.pdf), 94 por ciento de todos los datos pone en peligro servidores participan, que representa un incremento de 18 por ciento en el año anterior incorporan, y 69 por ciento de ataques de malware. En las poblaciones de servidor, no es frecuente encontrar que las instalaciones de antivirus y antimalware se coherente configuradas, obsoletos, mal configuradas o incluso deshabilitadas. En algunos casos, el software antivirus y antimalware está deshabilitado de personal administrativo, pero en otros casos, los atacantes deshabilite el software después de poner en peligro un servidor a través de otras vulnerabilidades. Cuando el software antivirus y antimalware está deshabilitado, los atacantes, a continuación, Plante malware en el servidor y centran en propagación comprometer entre todos los servidores.  
  
Es importante no solo para garantizar que los sistemas estén protegidos con la protección contra malware actual y completa, pero también para supervisar los sistemas para deshabilitar o eliminación de software antivirus y antimalware y reiniciar automáticamente protección cuando está deshabilitado manualmente. Aunque no puede garantizar que ningún software antivirus y antimalware prevención y detección de todas las infecciones, una implementación de antivirus y antimalware implementada y configurada correctamente puede reducir la probabilidad de ser infectados.  
  
### <a name="incomplete-patching"></a>Aplicación de revisión incompleta  
*Ley número tres: si no mantenerse al día con las revisiones de seguridad, la red no sea la suya durante mucho tiempo.* - [10 inmutables de administración de seguridad](https://technet.microsoft.com/library/cc722488.aspx)  
  
Microsoft publica boletines de seguridad en el segundo martes de cada mes, aunque en algunas ocasiones se publican actualizaciones de seguridad entre las actualizaciones de seguridad mensuales (también conocida como son las actualizaciones "fuera de banda") cuando se determina la vulnerabilidad a suponer un riesgo urgente para sistemas de los clientes. Si una pequeña empresa configura los equipos de Windows para usar Windows Update para administrar el sistema y aplicación de revisión de aplicación o una organización grande usa software de administración, como System Center Configuration Manager (SCCM) para implementar las revisiones de acuerdo con los planes jerárquicas detalladas, muchos clientes revisión sus infraestructuras de Windows en el momento oportuno relativamente.  
  
Sin embargo, algunas infraestructuras incluyan solo los equipos con Windows y las aplicaciones de Microsoft y en los entornos en peligro, es común que estrategia de administración de revisiones de la organización contiene los intervalos de encontrar. Sistemas de Windows en estos entornos coherente se han modificado. Sistemas operativos de Windows no se revisan esporádicamente, si en absoluto. Las aplicaciones estándar (comerciales) comerciales contengan vulnerabilidades que existen revisiones, pero no se han aplicado. Los dispositivos de red a menudo están configurados con las credenciales predeterminadas de fábrica y no firmware actualiza años después de su instalación. Aplicaciones y sistemas operativos que ya no son compatibles con los proveedores a menudo se mantienen en ejecución, a pesar de que ya no se revisada frente a vulnerabilidades. Cada uno de estos sistemas representa otro punto de entrada para los atacantes.  
  
La aproximación al consumidor de TI se introdujo desafíos adicionales en ese empleado pertenecientes a los dispositivos que se utilizan para acceder a datos corporativos de propiedad y la organización no puede tener poco a ningún control sobre la aplicación de revisión y la configuración de dispositivos personales de los empleados. Normalmente, hardware de clase empresarial se distribuye con capacidades de administración, a costa de menos elección en la selección de personalización y dispositivo individual y las opciones de configuración para la empresa. Centrada en el empleado hardware ofrece una mayor variedad de fabricantes, proveedores, características de seguridad de hardware, características de seguridad del software, las capacidades de administración y las opciones de configuración, y muchas características de la empresa pueden estar ausentes por completo.  
  
#### <a name="patch-and-vulnerability-management-software"></a>Revisión y el Software de administración de vulnerabilidad  
Si es un sistema de administración de revisiones efectiva en su lugar para los sistemas Windows y aplicaciones de Microsoft, parte de la superficie de ataque crear vulnerabilidades se ha solucionado. Sin embargo, a menos que también se mantengan al día de las revisiones y otras correcciones de los sistemas no son de Windows, aplicaciones ajenas a Microsoft, infraestructura de red y dispositivos de los empleados, la infraestructura sigue siendo vulnerable. En algunos casos, proveedor de la aplicación puede ofrecer funcionalidades de actualización automática; en otros casos, puede haber una necesidad en concebir un enfoque para recuperar y aplicar revisiones y otras correcciones con regularidad.
  
### <a name="outdated-applications-and-operating-systems"></a>Obsoletas aplicaciones y sistemas operativos  
*"No se puede esperar un sistema operativo en seis años a protegerte contra un ataque de seis meses de edad."* Profesionales de seguridad información con 10 años de experiencia proteger instalaciones de empresa  
  
Aunque "obtener actual, mantenerse al día" puede parecer una frase de marketing, los sistemas operativos obsoletos y aplicaciones crean riesgo en muchas de las organizaciones infraestructuras de TI. Un sistema operativo que se publicó en 2003 aún es posible que ser compatibles con el proveedor y proporcionado con las actualizaciones de vulnerabilidades de dirección, pero que el sistema operativo no pueden contener características de seguridad que se agregaron en las versiones más recientes del sistema operativo. Sistemas obsoletos incluso pueden requerir debilitar de determinada configuración de seguridad de AD DS para admitir las capacidades de dichos equipos menor.  
  
Aplicaciones que se escribieron usen protocolos de autenticación heredadas por proveedores que ya no están compatible con la aplicación normalmente no pueden ser reformó para admitir los mecanismos de autenticación más sólidos. Sin embargo, todavía puede configurarse dominio de Active Directory de la organización para almacenar valores hash de LAN Manager o las contraseñas con cifrado reversible para admitir esas aplicaciones. Las aplicaciones escritas antes de la introducción de sistemas operativos más recientes pueden no funcionar correctamente o en los sistemas operativos actuales, requerirá que las organizaciones mantener sistemas más antiguos y anteriores y en algunos casos, el hardware incompatible completo y el software.  
  
Incluso en casos en que las organizaciones han actualizados sus controladores de dominio a Windows Server 2012, Windows Server 2008 R2 o Windows Server 2008, es habitual para encontrar las partes importantes del miembro población de servidor se ejecute Windows Server 2003 (que es ya no está en el soporte estándar), o incluso Windows 2000 Server o Windows NT Server 4.0 (que no son totalmente compatibles). Cuanto más tiempo organización mantiene sistemas de antigüedad, cuanto más crece difieren en lo conjuntos de características y más probable es que los sistemas de producción serán compatibles. Además, cuanto más tiempo se mantiene un bosque de Active Directory, más, vemos que las aplicaciones y sistemas heredados se pierden en los planes de actualización. Esto puede significar que un equipo que ejecuta una sola aplicación puede introducir vulnerabilidades de dominio o bosque todo porque Active Directory está configurado para admitir sus protocolos antiguos y los mecanismos de autenticación.  
  
Para eliminar aplicaciones y sistemas heredados, primero debes centrarte en la identificación y la clasificación de ellos y luego en determinar si se debe actualizar o reemplazar la aplicación o el host. Si bien puede ser difícil encontrar los reemplazos de aplicaciones muy especializadas para el que no hay soporte técnico ni una ruta de actualización, es posible que pueden aprovechar el concepto de "destrucción creativa" para reemplazar la aplicación heredada con una nueva aplicación que proporciona la funcionalidad necesaria. [Planeación de comprometer](../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/Planning-for-Compromise.md) se describe con más detalle en "Planeación compromiso" más adelante en este documento.  
  
### <a name="misconfiguration"></a>Error de configuración  
*Ley número cuatro: no hace mucho para instalar las revisiones de seguridad en un equipo que nunca se aseguró comenzar.* - [10 inmutables de administración de seguridad](https://technet.microsoft.com/library/cc722488.aspx)  
  
Incluso en entornos donde se guardan por lo general, los sistemas actuales y revisiones, normalmente identificamos huecos o errores de configuración en el sistema operativo, aplicaciones que se ejecutan en equipos y Active Directory. Algunos errores de configuración de exponen solo el equipo local para poner en peligro, pero después de un equipo es "propiedad", los atacantes suelen centran en propagar peligro en otros sistemas y, finalmente, en Active Directory. Siguientes son algunas de las áreas comunes en el que identificamos las configuraciones que presentan riesgo.  
  
#### <a name="in-active-directory"></a>En Active Directory  
Las cuentas en Active Directory que normalmente se dirigen los atacantes son aquellos que son miembros del grupo con privilegios más elevados, como los miembros de los administradores de dominio (DA), administradores de empresa (EA) o grupos de administradores (BA) integrados en Active Directory. La pertenencia a estos grupos debe reducirse al menor número posible de cuentas para que la superficie de ataque de estos grupos es limitada. Es posible eliminar "permanente" pertenencia a estos grupos privilegiadas; es decir, puedes implementar la configuración que permita temporalmente rellenar estos grupos solo cuando se necesitan sus privilegios de dominio y bosques. Cuando se usan cuentas con privilegios elevados, que deben usarse solo en sistemas designados y seguros, como controladores de dominio o seguros hosts administrativos. En el que se proporciona información detallada para ayudar a implementar todas estas configuraciones de [reducir la superficie de ataque Active Directory](../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/Reducing-the-Active-Directory-Attack-Surface.md).  
  
Cuando se evalúa la pertenencia de los grupos con privilegios más altos en Active Directory, encontramos habitualmente pertenencia excesivo en los tres de los grupos de privilegios más. En algunos casos, las organizaciones tienen decenas, incluso en cientos de cuentas en grupos DA. En otros casos, las organizaciones colocar cuentas directamente en los grupos de administradores integrados, pensar que ese grupo es "menos privilegios" que el grupo DAs. No es así. A menudo encontramos unas cuantas permanente miembros del grupo de EA en el dominio raíz del bosque, a pesar de que rara vez se y temporalmente requiere privilegios EA. Encontrar la cuenta de administrador diarias de un usuario de TI en los tres grupos también es común, incluso aunque se trata de una configuración de forma eficaz redundante. Como se describe en [reducir la superficie de ataque Active Directory](../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/Reducing-the-Active-Directory-Attack-Surface.md), si una cuenta es miembro permanente de uno de estos grupos o todos ellos, la cuenta puede usarse para poner en riesgo e incluso destruir el entorno de AD DS y los sistemas y las cuentas que administrados por este. Se proporcionan recomendaciones para la configuración de seguridad y uso de cuentas con privilegios en Active Directory en [reducir la superficie de ataque Active Directory](../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/Reducing-the-Active-Directory-Attack-Surface.md).  
  
#### <a name="on-domain-controllers"></a>En los controladores de dominio  
Cuando calculamos controladores de dominio, encontramos a menudo encontrarlos configuran y se administran de forma no diferente a los servidores miembro. A veces, los controladores de dominio ejecutan las mismas aplicaciones y utilidades que se instalan en los servidores miembro, no porque se necesitan en los controladores de dominio, pero dado que las aplicaciones que forman parte de una compilación estándar. Estas aplicaciones pueden proporcionar una funcionalidad mínima en los controladores de dominio pero aumentar considerablemente la superficie de ataque exigiendo la opción de configuración que abrir puertos, crear cuentas de servicio con privilegios elevados o conceder acceso al sistema de los usuarios que no debe conectarse a un controlador de dominio para ningún fin aparte de autenticación y aplicación de la directiva de grupo. En algunos violaciones de los atacantes han usado herramientas que se instalaron en controladores de dominio no solo para acceder a los controladores de dominio, pero para modificar o pueden dañar la base de datos de AD DS.  
  
Cuando se extraen las opciones de configuración de Internet Explorer en controladores de dominio, descubrimos que los usuarios han iniciado sesión con cuentas que tienen altos niveles de privilegios en Active Directory y las cuentas que han usado para acceder a Internet y la intranet desde los controladores de dominio. En algunos casos, las cuentas configuradas configuración de Internet Explorer en los controladores de dominio para permitir que la descarga de Internet contenido y utilidades de software gratuito se han descargado de sitios de Internet e instalados en los controladores de dominio. La configuración de seguridad mejorada de Internet Explorer está habilitada para los usuarios y administradores de manera predeterminada, pero, a menudo es vemos se ha deshabilitado los administradores. Cuando una cuenta con privilegios elevados tiene acceso a Internet y descarga el contenido de cualquier equipo, dicho equipo se ponga en peligro grave. Cuando el equipo es un controlador de dominio, toda la instalación de AD DS es poner en riesgo.  
  
##### <a name="protecting-domain-controllers"></a>Proteger los controladores de dominio  
Controladores de dominio deben tratarse como componentes de infraestructura esenciales, protege más estrictas y configurados más rígida de archivo, imprimir y servidores de aplicaciones. Controladores de dominio no deben ejecutar cualquier software que no es necesario para el controlador de dominio a la función o no protege contra los ataques en el controlador de dominio. Controladores de dominio no deberían poder acceder a Internet, y la configuración de seguridad debe configurarse y aplica objetos de directiva de grupo (GPO). Se proporcionan recomendaciones detalladas para la seguridad de la instalación, la configuración y administración de controladores de dominio en [protección de controladores de dominio contra ataques](../../../ad-ds/plan/security-best-practices/Securing-Domain-Controllers-Against-Attack.md).  
  
#### <a name="within-the-operating-system"></a>En el sistema operativo  
*Ley número dos: si un malos puede modificar el sistema operativo en el equipo, no es el equipo ya.* - [Diez inmutables de seguridad (versión 2.0)](https://technet.microsoft.com/security/hh278941.aspx)  
  
Aunque algunas organizaciones crear configuraciones de línea base para los servidores de distintos tipos y permitan la personalización limitada del sistema operativo después de instalarlo, análisis de los entornos en riesgo a menudo descubre grandes cantidades de servidores implementado en un modo ad hoc y configura manualmente e independiente. Las configuraciones de entre dos servidores realizar la misma función pueden ser completamente diferentes, donde ningún servidor está configurado de forma segura. Por el contrario, las líneas de base de configuración de servidor pueden ser aplican de forma coherente, pero también coherentemente incorrecta; es decir, los servidores están configurados de manera que crea la misma vulnerabilidad en todos los servidores de un tipo determinado. Error de configuración incluye procedimientos como deshabilitar características de seguridad, conceder derechos excesiva y permisos a cuentas (especialmente las cuentas de servicio), uso de credenciales de locales idénticas entre sistemas y coordinación instalación de aplicaciones no autorizadas y de utilidades que crean vulnerabilidades de sus propios.  
  
##### <a name="disabling-security-features"></a>Deshabilitación de características de seguridad  
Las organizaciones a veces, deshabilitan el Firewall de Windows con seguridad avanzada (WFAS) fuera de una creencia que WFAS es difícil configurar o requiere la configuración de uso intensivo de trabajo. Sin embargo, a partir de Windows Server 2008, cuando se instala cualquier rol o característica en un servidor, está configurado de manera predeterminada con los privilegios mínimos necesarios para el rol o característica a la función y del Firewall de Windows se configura automáticamente para admitir el rol o característica. Al deshabilitar WFAS (y no usa otro firewall de basada en host en su lugar), las organizaciones aumentar la superficie de ataque de todo el entorno de Windows. Los firewalls perimetrales ofrecen protección contra ataques que dirigirse directamente a un entorno de Internet, pero no ofrecen protección contra ataques que aprovechan otros vectores de ataque como [descargas](https://www.microsoft.com/security/sir/glossary/drive-by-download-sites.aspx) ataques o los ataques que proceden de otros en peligro sistemas en la intranet.  
  
Configuración de Control de cuentas de usuario a veces está deshabilitadas en servidores porque personal administrativo encontrar los mensajes que aparecen intrusivo. Aunque [artículo de Microsoft Support 2526083](https://support.microsoft.com/kb/2526083) describe los escenarios en los que puede deshabilitarse UAC en Windows Server, a menos que se está ejecutando un servidor de instalación core (donde el UAC está deshabilitado por diseño), no se debe deshabilitar UAC en servidores minucioso y investigación.  
  
En otros casos, la configuración del servidor está configurada para menos seguras valores ya que las organizaciones aplican opciones de configuración del servidor obsoletos para nuevos sistemas operativos, como la aplicación de líneas de base de Windows Server 2003 a equipos que ejecutan Windows Server 2012, Windows Server 2008 R2 o Windows Server 2008, sin cambiar las líneas de base para reflejar los cambios en el sistema operativo. En lugar de cumplimiento de líneas de base de servidor antiguos a nuevos sistemas operativos, al implementar un nuevo sistema operativo, revisa los cambios de seguridad y las opciones de configuración para garantizar que la configuración de implementada es aplicables y apropiadas para el nuevo sistema operativo.  
  
##### <a name="granting-excessive-privilege"></a>Conceder privilegios excesivo  
En casi todos los entornos que nos hemos evaluado, excesivo privilegio se concede a cuentas locales y de dominio en los sistemas Windows. Los usuarios se otorgan derechos de administrador local en sus estaciones de trabajo, servidores miembro ejecutan servicios que están configurados con derechos más allá de lo que necesitan para funcionar y grupo de administradores locales entre todos los servidores contiene decenas o incluso en cientos de locales y cuentas de dominio. Compromiso de solo una cuenta con privilegios en un equipo permite a los atacantes poner en peligro las cuentas de cada usuario y el servicio que inicie sesión en el equipo y a las credenciales de cosecha y aprovechar para propagar pongan en peligro a otros sistemas.  
  
Aunque pass-the-hash (PTH) y otros ataques de robo de credenciales son ubicuas hoy en día, es porque no hay disponible gratuitamente herramientas que simplifica y fáciles de extraer las credenciales de otras cuentas con privilegios cuando un atacante haya obtenido acceso de nivel de administrador o de sistema a un equipo. Incluso sin herramientas que permite la recolección de credenciales de inicio de sesión, un atacante con acceso con privilegios en un equipo puede instalar tan fácilmente teclado de pulsaciones de teclas que captura las pulsaciones de teclas, capturas de pantalla y contenido del Portapapeles. Un atacante con acceso con privilegios en un equipo puede deshabilitar el software antimalware, instalar los rootkits, modificar los archivos protegidos o instalar malware en el equipo que automatiza ataques o activa y desactiva un servidor en un [descargas](https://www.microsoft.com/security/sir/glossary/drive-by-download-sites.aspx) host.  
  
Las tácticas usadas extender una infracción más allá de un solo equipo varían, pero la clave para propagar compromiso es la adquisición de acceso con privilegios elevados a otros sistemas. Al reducir el número de cuentas con acceso con privilegios para cualquier sistema, se reduce la superficie de ataque no solo de ese equipo, pero la probabilidad de que un atacante cosecha valiosas credenciales desde el equipo.  
  
##### <a name="standardizing-local-administrator-credentials"></a>Estandarizar las credenciales de administrador Local  
Durante cuánto tiempo se ha discutido entre los expertos en seguridad que si hay un valor de cambiar el nombre de cuentas de administrador locales en equipos con Windows. ¿Qué es realmente importante acerca de las cuentas de administrador locales es si están configuradas con el mismo nombre de usuario y contraseña entre varios equipos.  
  
Si la cuenta de administrador local se denomina en el mismo valor a través de servidores y la contraseña que se asigna a la cuenta también está configurada en el mismo valor, los atacantes pueden extraer las credenciales de cuenta en un equipo en qué administrador o el nivel del sistema se ha obtenido acceso. El atacante no tiene que inicialmente poner en peligro la cuenta de administrador. solo necesita poner en peligro la cuenta de un usuario que sea miembro del grupo de administradores local o de una cuenta de servicio que está configurada para ejecutarse como LocalSystem o con privilegios de administrador. El atacante puede extraer las credenciales de la cuenta de administrador y reproducir esas credenciales en los inicios de sesión de red a otros equipos de la red.  
  
Como otro equipo tiene una cuenta local con el mismo nombre de usuario y contraseña (o hash de contraseña) como las credenciales de cuenta que se está presentando, el intento de inicio de sesión se realiza correctamente y el atacante obtiene acceso con privilegios en el equipo de destino. En las versiones actuales de Windows, es la cuenta predefinida de administrador [deshabilitado de manera predeterminada](https://technet.microsoft.com/library/cc753450.aspx), pero en los sistemas operativos heredados, la cuenta está habilitada de manera predeterminada.  
  
> [!NOTE]  
> Algunas organizaciones intencionadamente han configurado cuentas administrador locales habilitarse en la creencia Esto proporciona un "a prueba de errores" en caso de que se bloquean todas las demás cuentas con privilegios sale de un sistema. Sin embargo, incluso si la cuenta de administrador local está deshabilitada y no hay ninguna otra cuenta disponible que se puede habilitar la cuenta o iniciar sesión en el sistema con privilegios de administrador, el sistema se puede arrancar en modo seguro y la cuenta predefinida de administrador local se puede volver a habilitar, como se describe en [artículo de Microsoft Support 814777](https://support.microsoft.com/kb/814777). Además, si el sistema aplica correctamente los GPO, se puede modificar un GPO para (temporalmente) volver a habilitar la cuenta de administrador o grupos restringidos puede configurarse para agregar una cuenta de dominio al grupo de administradores local. Se pueden realizar reparaciones y nuevo se puede deshabilitar la cuenta de administrador. Para evitar que eficazmente un compromiso lateral que usa credenciales de cuenta de administrador locales predefinidas, contraseñas y nombres de usuario único deben estar configuradas para cuentas de administrador locales. Para implementar contraseñas únicas para las cuentas de administrador locales a través de un GPO, consulta [soluciones para la administración de la contraseña de la cuenta Administrador predefinida a través de GPO](https://technet.microsoft.com/mt227395.aspx) en technet.  
  
##### <a name="permitting-installation-of-unauthorized-applications"></a>Permitir la instalación de aplicaciones no autorizadas  
*Ley número uno: Si un intruso puede convencer a ejecutar este programa en el equipo, no es exclusivamente en el equipo ya.* - [Diez inmutables de seguridad (versión 2.0)](https://technet.microsoft.com/security/hh278941.aspx)  
  
Si una organización implementa la configuración de línea base coherente entre servidores, no se debe permitir la instalación de aplicaciones que no forman parte de la función definida de un servidor. Al permitir que se instale software que no forma parte de la funcionalidad designado del servidor, los servidores se exponen a accidental o malintencionada de instalación de software que aumenta la superficie de ataque del servidor, introduce vulnerabilidades de la aplicación o hace inestabilidad del sistema.  
  
#### <a name="applications"></a>Aplicaciones  
Como se describió anteriormente, las aplicaciones a menudo se instalado y configuradas para usar cuentas que se otorgan que realmente necesita privilegios más que la aplicación. En algunos casos, documentación de la aplicación especifica que las cuentas de servicio deben ser miembros del grupo de administradores local de un servidor o deben estar configuradas para ejecutarse en el contexto de LocalSystem. Esto suele ser no porque la aplicación requiere estos derechos, pero dado que determinar qué derechos y permisos necesidad de cuentas de servicio de la aplicación requiere una inversión en más tiempo y esfuerzo. Si una aplicación no se instala con los privilegios mínimos necesarios para que la aplicación y sus características configurados funcionar, el sistema está expuesto a ataques que sacan partido de privilegios de aplicación sin cualquier ataque contra el propio sistema operativo.  
  
### <a name="lack-of-secure-application-development-practices"></a>Falta de las prácticas de desarrollo de aplicaciones seguras  
Existe en la infraestructura para admitir las cargas de trabajo de la empresa. Cuando estas cargas de trabajo se implementan en aplicaciones personalizadas, es fundamental para garantizar que las aplicaciones se desarrollen con recomendaciones segura. Análisis de la causa de incidentes de toda la empresa a menudo revela que se efectúe un compromiso inicial a personalizada aplicaciones, especialmente aquellos que son Internet opuestas. La mayoría de estos compromisos se llevan a cabo a través de riesgo de ataques conocidos como inserción SQL (SQLi) y ataques de scripts de sitios (XSS).  
  
Inserción de SQL es una vulnerabilidad de la aplicación que permite la entrada definida por el usuario modificar una instrucción de SQL que se pasa a la base de datos para la ejecución. Esta entrada puede proporcionarse a través de un campo de la aplicación, un parámetro (por ejemplo, la cadena de consulta o en una cookie) u otros métodos. El resultado de esta inserción es que la instrucción de SQL que se proporciona a la base de datos es diferente fundamentalmente esperaba por qué el desarrollador. Por ejemplo, realizar una consulta común usada en la evaluación de una combinación de nombre y contraseña de usuario:  
  
`SELECT userID FROM users WHERE username = 'sUserName' AND password = 'sPassword'`  
  
Cuando esto se ha recibido por el servidor de bases de datos, indica el servidor para buscar a través de la tabla de usuarios y devolver todos los registros de identificador de usuario en el nombre de usuario y contraseña coincidan con los proporcionados por el usuario (presumiblemente a través de un formulario de inicio de sesión de algún tipo). Naturalmente la intención del desarrollador en este caso es devolver solo un registro válido si el usuario pueden proporcionar un nombre de usuario y una contraseña. Si bien es incorrecto, el servidor de bases de datos pueda encontrar un registro coincidente y devuelve un resultado vacío.  
  
El problema se produce cuando un atacante hace algo inesperado como al proporcionar su propios SQL en lugar de los datos válidos. Puesto que SQL es interpretada marcha por el servidor de bases de datos, el código insertado procesará como si el desarrollador tenía incluirlo en sí mismo. Por ejemplo, si el atacante especificado **administrador** para el identificador de usuario y **xyz** o **1 = 1** como la contraseña, sería la instrucción resultante procesada por la base de datos:  
  
`SELECT userID FROM users WHERE username = 'administrator' AND password = 'xyz' OR 1=1`  
  
Cuando esta consulta se procesa mediante el servidor, todas las filas en la tabla se devolverá en la consulta porque 1 = 1 siempre se evaluará en True, por lo tanto, no importa si el nombre de usuario correcto y la contraseña se conoce o proporcionado. El resultado final en la mayoría de los casos es que el usuario se registrarán en como el primer usuario en la base de datos del usuario; en la mayoría de los casos, esta será el usuario administrativo.  
  
Además de simplemente inicia sesión, con formato incorrecto instrucciones SQL como esto puede usarse para agregar, eliminación, o cambiarán los datos o incluso colocar todos tablas desde una base de datos. En los casos más extremos donde SQLi se combina con el privilegio excesivo, se pueden ejecutar los comandos del sistema operativo para habilitar la creación de nuevos usuarios, para descargar las herramientas de ataque o realizar otras acciones de los atacantes elegir.  
  
En las secuencias de comandos, se habla sobre la vulnerabilidad en el resultado de la aplicación. Un ataque comienza con un atacante proporcionar datos con formato incorrecto a la aplicación, pero en este caso los datos con formato incorrecto en el formulario de código de scripting (por ejemplo, en JavaScript) que se ejecutará según el Explorador de la víctima. Vulnerabilidad de seguridad de una vulnerabilidad XSS puede permitir que un atacante ejecutar las funciones de la aplicación de destino en el contexto del usuario que inicia el explorador. Los ataques XSS normalmente se inician mediante un correo electrónico de suplantación de identidad fomentar que el usuario haga clic en un vínculo que se conecta a la aplicación y se ejecuta el código de ataque.  
  
A menudo se aprovecha XSS en escenarios de comercio electrónico donde un atacante puede hacer compras o transferencia de dinero en el contexto del usuario explotado y de banca en línea. En el caso de un ataque de destino en una aplicación de administración de identidad personalizada basada en web, puede permitir que un atacante crear sus propias identidades, modifica los derechos y permisos y poner en peligro sistémico.  
  
Aunque la explicación completa de las secuencias de comandos y de inserción de SQL está fuera del ámbito de este documento, el [proyecto de seguridad de aplicaciones de Web abierta (OWASP)](https://www.owasp.org/index.php/Main_Page) publica una lista de 10 principales con información detallada acerca de las vulnerabilidades y contramedidas.  
  
Independientemente de la inversión en una infraestructura de seguridad, si se implementan mal diseñadas y escritas aplicaciones dentro de esa infraestructura, el entorno se realiza vulnerable a ataques. A menudo infraestructuras incluso bien protegidas no pueden proporcionar contramedidas eficaces para estos ataques de la aplicación. Interés compuesto el problema, aplicaciones mal diseñadas pueden requerir que las cuentas de servicio se permisos excesiva para la aplicación funcione.  
  
El ciclo de vida de desarrollo de seguridad de Microsoft (SDL) es un conjunto de controles de proceso estructural que funcionan para mejorar el principio de seguridad desde el principio en los requisitos de recopilación y extender a través del ciclo de vida de la aplicación hasta que se retiran. Esta integración de los controles de seguridad eficaz solo no es crítica desde una perspectiva de seguridad, es fundamental para garantizar que la seguridad de la aplicación es costo y programar eficaz. Evaluación de una aplicación para los problemas de seguridad cuando eficaz es código completo requiere que las organizaciones para tomar decisiones sobre la seguridad de la aplicación solo antes o incluso después de que se haya implementado la aplicación. Una organización puede elegir tratar los errores de la aplicación antes de implementar la aplicación en producción, incurrir en costos y los retrasos, o la aplicación puede implementarse en producción y con brechas de seguridad conocidas, exponer la organización ponga en peligro.  
  
Algunas organizaciones colocar el costo total de corregir un problema de seguridad en el código de producción por encima de 10.000 $ por el problema y las aplicaciones desarrolladas sin SDL eficaz pueden Media más de diez problemas de gravedad alta por 100.000 líneas de código. En aplicaciones de gran tamaño, los costos escalen rápidamente. Por el contrario, muchas empresas establecen un punto de referencia de menos de un problema por 100.000 líneas de código en la fase de revisión del código final del SDL y el objetivo es cero problemas en las aplicaciones de alto riesgo en producción.  
  
Implementar el SDL mejora la seguridad, incluidos los requisitos de seguridad desde el principio de recopilación de requisitos y diseño de una aplicación proporciona para aplicaciones de alto riesgo; de modelado de amenazas requiere aprendizaje eficaz y supervisión de los desarrolladores; y requiere clara y prácticas y estándares de código coherente. El efecto neto de SDL es mejoras significativas en la seguridad de la aplicación mientras se reduce el costo de desarrollar, implementar, mantener y de retirada de una aplicación. Aunque una explicación detallada del diseño y la implementación de SDL queda fuera del ámbito de este documento, hacer referencia a la [ciclo de vida de desarrollo de seguridad de Microsoft](https://www.microsoft.com/security/sdl/default.aspx) para obtener información y directrices detalladas.  
  


