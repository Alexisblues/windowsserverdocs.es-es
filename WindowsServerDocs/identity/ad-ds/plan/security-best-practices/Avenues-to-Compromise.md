---
ms.assetid: d7a4d2e1-217d-4ffc-93f0-817149bd9e7f
title: Vías de compromiso
description: ''
author: MicrosoftGuyJFlo
ms.author: joflore
manager: mtillman
ms.date: 05/31/2017
ms.topic: article
ms.prod: windows-server-threshold
ms.technology: identity-adds
ms.openlocfilehash: 916bffd4f83e5c72816035542772342010e1a67c
ms.sourcegitcommit: 0d0b32c8986ba7db9536e0b8648d4ddf9b03e452
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 04/17/2019
ms.locfileid: "59874486"
---
# <a name="avenues-to-compromise"></a>Vías de compromiso

>Se aplica a: Windows Server 2016, Windows Server 2012 R2, Windows Server 2012

*Ley número siete: La red más segura es bien administrada.* - [10 leyes inmutables de la administración de seguridad](https://technet.microsoft.com/library/cc722488.aspx)  
  
En organizaciones que han presentado los eventos de riesgo grave, evaluaciones suele revelan que las organizaciones tienen una limitada visibilidad sobre el estado real de sus infraestructuras de TI, que puede diferir notablemente de sus "como se documenta" Estados. Estas desviaciones introducen vulnerabilidades que exponen el entorno para poner en peligro, a menudo con poco riesgo de detección hasta que se ha progresado el riesgo en el punto en el que los atacantes eficazmente "poseen" el entorno.  
  
Evaluaciones detalladas de configuración de AD DS de estas organizaciones, infraestructuras de clave pública (PKI), servidores, estaciones de trabajo, aplicaciones, control de acceso (ACL) y otras tecnologías de revelan errores de configuración y las vulnerabilidades que, si corregido, podría haber impedido la puesta en peligro inicial.  
  
Análisis de documentación, los procesos y procedimientos de TI identifica vulnerabilidades que introducen lagunas en las prácticas administrativas que se han aprovechado los atacantes obtener finalmente los privilegios que se utilizaron para poner en peligro el bosque de Active Directory. Un bosque completo en peligro es uno en el que los atacantes poner en peligro no sólo los sistemas individuales, las aplicaciones o las cuentas de usuario, pero concentrar su acceso para obtener un nivel de privilegios en el que puede modificar o destruir todos los aspectos del bosque. Cuando una instalación de Active Directory se ha visto comprometida a que grado, los atacantes pueden realizar los cambios que les permiten mantener una presencia en todo el entorno o, aún peor, destruir el directorio y los sistemas y las cuentas que administra.  
  
Aunque un número de las vulnerabilidades aprovechadas habitualmente en las descripciones siguientes no es ataques contra Active Directory, permiten que los atacantes establecer un punto de apoyo en un entorno que se puede usar para ejecutar la elevación de privilegios (también denominada privilegio elevación) ataques y para, finalmente, destino y poner en peligro de AD DS.  
  
En esta sección de este documento se centra en describir los mecanismos que los atacantes utilizan normalmente para tener acceso a la infraestructura y, finalmente, para iniciar ataques de elevación de privilegios. Consulte también las siguientes secciones:  
  
-   [Lo que reduce la superficie de ataque de Active Directory](../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/Reducing-the-Active-Directory-Attack-Surface.md) detallada de las recomendaciones para la configuración segura de Active Directory.  
  
-   [Supervisión de Active Directory para signos de poner en peligro](../../../ad-ds/plan/security-best-practices/Monitoring-Active-Directory-for-Signs-of-Compromise.md) recomendaciones para ayudar a detectar riesgos  
  
-   [Planeación de compromiso](../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/Planning-for-Compromise.md) enfoques de alto nivel para ayudar a prepararse para los ataques contra la infraestructura de TI y las perspectivas empresariales  
  
> [!NOTE]  
> Aunque este documento se centra en los sistemas de Active Directory y Windows que forman parte de un dominio de AD DS, los atacantes rara vez se centran únicamente en Active Directory y Windows. En entornos con una mezcla de sistemas operativos, aplicaciones, directorios y repositorios de datos, es común encontrar que los sistemas que no son Windows también han estado en peligro. Esto es especialmente cierto si los sistemas proporcionan un "puente" entre Windows y los entornos que no sean Windows, como los servidores de archivos para tener acceso a los clientes de Windows y UNIX o Linux, los directorios que proporcionan servicios de autenticación para varios sistemas operativos, o metadirectorios que sincronización datos entre directorios distintos.  
>   
> El objetivo de AD DS es debido a las funcionalidades de administración centralizadas de un acceso y la configuración que proporciona no solo a los sistemas de Windows, sino también a otros clientes. Cualquier otro directorio o aplicación que proporciona autenticación y configuración de servicios de administración puede y se dirigirán los atacantes determinados. Aunque este documento se centra en las protecciones que pueden reducir la probabilidad de un riesgo de las instalaciones de Active Directory, todas las organizaciones que incluye equipos que no sean Windows, directorios, aplicaciones o datos de repositorios también deben preparar para ataques contra esos sistemas.  
  
## <a name="initial-breach-targets"></a>Destinos de violación inicial  
Nadie intencionadamente compila una infraestructura de TI que expone la organización para poner en peligro. Cuando se construye un bosque de Active Directory por primera vez, suele original y actual. Como pasan años y se adquieren nuevos sistemas operativos y aplicaciones, se agreguen al bosque. Tal como se reconocen las ventajas de la capacidad de administración que proporciona Active Directory, se agrega más contenido en el directorio, más personas integran sus equipos o aplicaciones con AD DS y actualizar los dominios para admitir la nueva funcionalidad que ofrece el máximo versiones actuales del sistema operativo Windows. Sin embargo, ¿qué ocurre también con el tiempo, es que incluso cuando se agrega una nueva infraestructura, es posible que otras partes de la infraestructura no se puede mantener así como estaban inicialmente, sistemas y aplicaciones están funcionando correctamente y, por tanto, no están recibiendo atención y las organizaciones empezar olvidarse de que no han eliminado sus infraestructuras heredadas. En función de lo que vemos en la evaluación de infraestructuras en peligro, los más antiguos, más grandes y más complejos del entorno, más probable es que existen numerosas instancias de las vulnerabilidades aprovechadas habitualmente.  
  
Independientemente de la motivación del atacante, la mayoría de las infracciones de seguridad de información se iniciarán con este compromiso de uno o dos sistemas en un momento. Estos eventos iniciales, o puntos de entrada en la red, a menudo aprovechan las vulnerabilidades que se han corregido, pero que no estaban. El [2012 datos infracción de las investigaciones de informe (DBIR)](http://www.verizonbusiness.com/resources/reports/rp_data-breach-investigations-report-2012_en_xg.pdf), que es un estudio anual generado por el equipo de riesgos de Verizon en cooperación con un número de organismos de seguridad nacionales y otras empresas, los Estados que 96% de ataques "no eran muy difícil"y que"97% de las infracciones eran evitables a través de controles simples o intermedios." Estos resultados pueden ser una consecuencia directa de las vulnerabilidades aprovechadas comúnmente que siguen.  
  
### <a name="gaps-in-antivirus-and-antimalware-deployments"></a>Vacíos en implementaciones de Antimalware y Antivirus  
*Ley número ocho: Un analizador de malware desactualizadas sólo es ligeramente mejor que ningún analizador en absoluto.* - [10 leyes inmutables de seguridad (versión 2.0)](https://technet.microsoft.com/security/hh278941.aspx)  
  
Análisis de las implementaciones de antivirus y antimalware de las organizaciones a menudo revela un entorno en el que la mayoría de las estaciones de trabajo están configurados con el software antivirus y antimalware que está habilitado y actual. Las excepciones son normalmente las estaciones de trabajo que se conectan con poca frecuencia a los dispositivos corporativos de entorno o empleado para los antivirus y antimalware puede ser difícil de implementar, configurar y actualizar software.  
  
Las poblaciones de servidor, sin embargo, suelen ser que menos protegido sistemáticamente en muchos entornos en peligro. Como se notifica en el [investigaciones de infracción de datos 2012](http://www.verizonbusiness.com/resources/reports/rp_data-breach-investigations-report-2012_en_xg.pdf), 94 por ciento de todos los datos pone en peligro los servidores implicados, que representa un aumento del 18 por ciento a lo largo del año anterior e incorporado de 69 por ciento de los ataques de malware. En la población de servidor, no es raro encontrar que las instalaciones de antivirus y antimalware se configurado de forma incoherente, está obsoleta, mal configuradas o incluso deshabilitadas. En algunos casos, el software antivirus y antimalware está deshabilitado de forma personal administrativo, pero en otros casos, los atacantes deshabilite el software después de poner en peligro un servidor a través de otras vulnerabilidades. Cuando se deshabilita el software antivirus y antimalware, los atacantes, a continuación, Plante malware en el servidor y centran en propagar poner en peligro a través de la población de servidor.  
  
Es importante no sólo para asegurarse de que sus sistemas están protegidos con protección frente a malware actual y completa, pero también para supervisar los sistemas para la deshabilitación o eliminación de software antivirus y antimalware y protección se reinicie automáticamente cuando es deshabilitado manualmente. Aunque ningún software antivirus y antimalware puede garantizar la prevención y detección de todas las infecciones, una implementación de antivirus y antimalware implementada y configurada correctamente puede reducir la probabilidad de infección.  
  
### <a name="incomplete-patching"></a>Aplicación de revisiones incompleta  
*Ley número tres: Si no mantenerse al día con las revisiones de seguridad, la red no estará suyos durante mucho tiempo.* - [10 leyes inmutables de la administración de seguridad](https://technet.microsoft.com/library/cc722488.aspx)  
  
Microsoft publicará boletines de seguridad el segundo martes de cada mes, aunque en algunas ocasiones se publican actualizaciones de seguridad entre las actualizaciones de seguridad mensual (también conocido como son las actualizaciones "fuera de banda") cuando se determina la vulnerabilidad que causan un riesgo urgente a sistemas de cliente. Si una pequeña empresa configura sus equipos de Windows para usar Windows Update para administrar la aplicación de revisiones de aplicación y del sistema o una gran organización utiliza software de administración como System Center Configuration Manager (SCCM) para implementar revisiones según detallada, los planes de jerárquicos, muchos clientes revisión sus infraestructuras de Windows en relativamente puntualmente.  
  
Sin embargo, algunas de las infraestructuras incluyen solo los equipos de Windows y las aplicaciones de Microsoft, y en entornos en peligro, es común encontrar que la estrategia de administración de revisiones de la organización contiene espacios. Sistemas de Windows en estos entornos de forma incoherente se han modificado. Los sistemas operativos de Windows: no se revisan de forma esporádica, si en absoluto. Aplicaciones comerciales de (COTS) listos para usar contienen vulnerabilidades que las revisiones existen, pero no se han aplicado. A menudo, los dispositivos de red se configuran con las credenciales predeterminadas de fábrica y ningún firmware actualiza años después de su instalación. Las aplicaciones y sistemas operativos que ya no son compatibles con sus proveedores se mantienen a menudo ejecutando, a pesar del hecho que ya no puede revisar contra las vulnerabilidades. Cada uno de estos sistemas sin revisiones representa otro punto de entrada para los atacantes.  
  
La consumerización de TI ha introducido retos adicionales de ese empleado propiedad dispositivos se usan para tener acceso a datos de propiedad corporativos y la organización no puede tener poco a ningún control sobre la aplicación de revisiones y la configuración de dispositivos personales de los empleados. Hardware de clase empresarial normalmente se incluye con las opciones de configuración de la lista para la empresa y capacidades de administración, a costa de menos elección en la selección de personalización y dispositivos individual. Centrados en empleado hardware ofrece una gama más amplia de fabricantes, proveedores, las características de seguridad de hardware, las características de seguridad de software, las capacidades de administración y las opciones de configuración, y muchas características empresariales pueden que falte por completo.  
  
#### <a name="patch-and-vulnerability-management-software"></a>Software de administración de vulnerabilidades y revisiones  
Si es un sistema de administración de revisiones eficaz en su lugar para los sistemas de Windows y aplicaciones de Microsoft, se ha corregido la parte de la superficie de ataque que crean vulnerabilidades sin revisiones. Sin embargo, a menos que también se mantienen informados sobre las revisiones y otras correcciones de los sistemas que no sean Windows, las aplicaciones que no sean de Microsoft, infraestructura de red y dispositivos de los empleados, la infraestructura sigue siendo vulnerable. En algunos casos, el proveedor de la aplicación puede ofrecer capacidades de actualización automática; en otros casos, es posible que sea necesario idear un enfoque para recuperar periódicamente y aplicar revisiones y otras correcciones de errores.
  
### <a name="outdated-applications-and-operating-systems"></a>Sistemas operativos y aplicaciones obsoletas  
*"No se puede esperar un sistema operativo de seis años para protegerse contra un ataque de seis meses de edad".* -Información seguridad Professional con 10 años de experiencia de proteger las instalaciones de empresa  
  
Aunque "obtener actual, manténgase al día" puede parecer una frase de marketing, sistemas operativos obsoletos y aplicaciones crean riesgos en muchas de las organizaciones de infraestructuras de TI. Un sistema operativo que se publicó en 2003 aún se podría admitido por el proveedor y proporcionado con las actualizaciones a las vulnerabilidades de la dirección, pero que el sistema operativo no puede contener las características de seguridad que se agregan en las versiones más recientes del sistema operativo. Sistemas obsoletos incluso pueden exigir debilite determinada configuración de seguridad de AD DS para admitir las capacidades de menor de esos equipos.  
  
Las aplicaciones escritas para usar protocolos de autenticación heredados por los proveedores que ya no son compatibles con la aplicación normalmente no se reformó para admitir mecanismos de autenticación más seguros. Sin embargo, todavía puede configurarse el dominio de Active Directory de una organización para almacenar contraseñas con cifrado reversible para admitir estas aplicaciones y valores hash de LAN Manager. Las aplicaciones escritas antes de la introducción de los sistemas operativos más recientes no funcionen correctamente o en absoluto en los sistemas operativos actuales, exigir a las organizaciones a mantener los sistemas más antiguos y anteriores y en algunos casos, no se admiten hardware y software.  
  
Incluso en casos en que las organizaciones han actualizado sus controladores de dominio a Windows Server 2012, Windows Server 2008 R2 o Windows Server 2008, es habitual encontrar partes importantes del miembro de rellenado de servidor que se esté ejecutando Windows Server 2003, Windows 2000 server o Windows NT Server 4.0 (que no son totalmente compatibles). Cuanto más tiempo una organización mantiene los sistemas de detección de registros obsoletos, más que crece la disparidad entre conjuntos de características y más probable es que los sistemas de producción no serán compatibles. Además, cuanto más tiempo se mantiene un bosque de Active Directory, más que observamos que las aplicaciones y sistemas heredados se pierden en planes de actualización. Esto puede significar que un equipo que ejecuta una sola aplicación puede introducir vulnerabilidades de dominio o bosque porque Active Directory está configurado para admitir sus protocolos heredados y mecanismos de autenticación.  
  
Para eliminar las aplicaciones y sistemas heredados, primero debe centrarse en la identificación y catalogación de ellos, a continuación, acerca de cómo determinar si se debe actualizar o reemplazar la aplicación o el host. Aunque puede ser difícil encontrar los reemplazos para aplicaciones altamente especializadas para la que hay soporte técnico ni una ruta de actualización, es posible que pueda aprovechar un concepto denominado "destrucción creative" para reemplazar la aplicación heredada con una nueva aplicación que proporciona la funcionalidad necesaria. [Planeación de compromiso](../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/Planning-for-Compromise.md) se describe con más detalle en "Planear para poner en peligro" más adelante en este documento.  
  
### <a name="misconfiguration"></a>configuración incorrecta  
*Ley número cuatro: No me ayuda mucho para instalar las revisiones de seguridad en un equipo que nunca se ha protegido para empezar.* - [10 leyes inmutables de la administración de seguridad](https://technet.microsoft.com/library/cc722488.aspx)  
  
Incluso en entornos donde los sistemas generalmente se mantienen actualizadas y revisadas, normalmente identificamos los espacios o configuraciones incorrectas en el sistema operativo, aplicaciones que se ejecutan en equipos y Active Directory. Algunas configuraciones erróneas de exponen solo el equipo local para poner en peligro, pero después de un equipo es "propiedad", los atacantes suelen centran en propagar la intromisión en otros sistemas y, finalmente, en Active Directory. Estas son algunas de las áreas comunes en el que nos identificar las configuraciones que introducen riesgos.  
  
#### <a name="in-active-directory"></a>En Active Directory  
Las cuentas en Active Directory que tienen como destino con más frecuencia por los atacantes son aquellos que son miembros de los grupos con privilegios más elevados, como los miembros de los administradores de dominio (DA), los administradores de Enterprise (EA) o grupos de administradores (BA) integrados en Active Directorio. La pertenencia a estos grupos se debe reducir al menor número de posibles cuentas para que la superficie de ataque de estos grupos está limitada. Es posible incluso eliminar la pertenencia a "permanente" en estos grupos con privilegios; es decir, puede implementar configuraciones que permitan temporalmente llenar estos grupos solo cuando se necesiten sus privilegios de dominio y bosque. Cuando se usan cuentas con privilegios elevados, que deben utilizarse únicamente en sistemas seguros, designados como hosts administrativos seguros o de los controladores de dominio. Se proporciona información detallada para ayudar a implementar todas estas configuraciones en [lo que reduce la superficie de ataque de Active Directory](../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/Reducing-the-Active-Directory-Attack-Surface.md).  
  
Cuando se evalúa la pertenencia de los grupos con privilegios más altos en Active Directory, encontramos normalmente suscripción excesiva en los tres de los grupos más privilegios. En algunos casos, las organizaciones tengan docenas, incluso cientos de cuentas de grupos de DA. En otros casos, las organizaciones colocan cuentas directamente en el grupo de administradores integrado, pensando que el grupo es "menos privilegios" que el grupo de almacenamiento de conexión directa. No es así. A menudo, encontramos un puñado de miembros permanentes del grupo de EA en el dominio raíz del bosque, a pesar del hecho que rara vez se y temporalmente requiere privilegios EA. Buscar cuenta administrativa de un usuario TI diarias en los tres grupos también es común, aunque se trata de una configuración de redundancia de forma eficaz. Como se describe en [lo que reduce la superficie de ataque de Active Directory](../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/Reducing-the-Active-Directory-Attack-Surface.md), si una cuenta es miembro permanente de uno de estos grupos o todos ellos, la cuenta puede usarse para poner en peligro y destruir incluso el entorno de AD DS y los sistemas y cuentas administradas por ella. Se proporcionan recomendaciones para la configuración segura y el uso de cuentas con privilegios en Active Directory en [lo que reduce la superficie de ataque de Active Directory](../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/Reducing-the-Active-Directory-Attack-Surface.md).  
  
#### <a name="on-domain-controllers"></a>En los controladores de dominio  
Cuando se evaluación los controladores de dominio, se encuentra a menudo encontrarlos configura y administra de forma no diferente a los servidores miembro. A veces, los controladores de dominio ejecutan las mismas aplicaciones y herramientas se instalan en servidores miembro, no porque son necesarios en los controladores de dominio, pero dado que las aplicaciones forman parte de una compilación estándar. Estas aplicaciones pueden proporcionar la funcionalidad mínima en los controladores de dominio pero aumentar considerablemente la superficie de ataque al requerir que la opción de configuración que abrir puertos, crear cuentas de servicio con privilegios elevados o conceder acceso al sistema de los usuarios que no debe conectarse a un controlador de dominio para cualquier propósito distinto de autenticación y aplicación de directiva de grupo. En algunos infracciones, los atacantes han usado las herramientas que ya estaban instaladas en controladores de dominio no solo para tener acceso a los controladores de dominio, pero para modificar o dañar la base de datos de AD DS.  
  
Cuando se extraen los valores de configuración de Internet Explorer en controladores de dominio, descubrimos que los usuarios iniciaron sesión con cuentas que tienen altos niveles de privilegios en Active Directory y han usado las cuentas para tener acceso a Internet e intranet del dominio controladores. En algunos casos, las cuentas han configurado la configuración de Internet Explorer en los controladores de dominio que permita la descarga de Internet contenido y las utilidades de freeware se han descargado de sitios de Internet e instalado en los controladores de dominio. Configuración de seguridad mejorada de Internet Explorer está habilitada para los usuarios y administradores de forma predeterminada, aunque a menudo observamos que es se ha deshabilitado para los administradores. Cuando una cuenta con muchos privilegios tiene acceso a Internet y descarga contenido en cualquier equipo, ese equipo es poner en peligro grave. Cuando el equipo es un controlador de dominio, toda la instalación de AD DS se pone en riesgo.  
  
##### <a name="protecting-domain-controllers"></a>Protección de controladores de dominio  
Controladores de dominio deben tratar como componentes de infraestructura crítica proteger más rigurosamente y configurados más firmemente que los archivos, impresión y servidores de aplicaciones. Los controladores de dominio no deben ejecutar cualquier software que no es necesario para el controlador de dominio a la función o no protege el controlador de dominio frente a ataques. Los controladores de dominio no deberían poder acceder a Internet y configuración de seguridad debe configurado y se aplican mediante objetos de directiva de grupo (GPO). Se proporcionan recomendaciones detalladas para la seguridad de la instalación, la configuración y la administración de controladores de dominio en [protección de controladores de dominio frente a ataque](../../../ad-ds/plan/security-best-practices/Securing-Domain-Controllers-Against-Attack.md).  
  
#### <a name="within-the-operating-system"></a>En el sistema operativo  
*Ley número dos: Si un intruso puede alterar el sistema operativo en el equipo, ya no es su equipo.* - [10 leyes inmutables de seguridad (versión 2.0)](https://technet.microsoft.com/security/hh278941.aspx)  
  
Aunque algunas organizaciones creación configuraciones de línea de base para los servidores de distintos tipos y permiten la personalización limitada del sistema operativo después de instalarlo, análisis de los entornos en peligro a menudo revela grandes cantidades de los servidores implementados en un modo ad hoc y configura manualmente e independiente. Las configuraciones entre dos servidores que se realizan la misma función pueden ser completamente distintas, donde ningún servidor está configurado de forma segura. Por el contrario, las líneas de base de configuración de servidor se pueden aplican de forma coherente, pero también sistemáticamente configurada correctamente; es decir, los servidores están configurados de manera que crea la vulnerabilidad de la misma en todos los servidores de un tipo determinado. Una configuración incorrecta incluye prácticas como deshabilitar las características de seguridad, conceder un exceso de derechos y permisos a cuentas (especialmente cuentas de servicio), uso de credenciales locales idénticas entre sistemas y que permita instalación de aplicaciones no autorizadas y utilidades que crean vulnerabilidades de sus propios.  
  
##### <a name="disabling-security-features"></a>Al deshabilitar las características de seguridad  
Las organizaciones a veces deshabilitan Firewall de Windows con seguridad avanzada (WFAS) fuera de una creencia que WFAS es difícil configurar o requiere la configuración del trabajo intensivo. Sin embargo, empezando por Windows Server 2008, cuando cualquier rol o característica que está instalado en un servidor, se configura de forma predeterminada con los privilegios mínimos necesarios para el rol o característica a la función y el Firewall de Windows se configura automáticamente para admitir el rol o una característica. Al deshabilitar WFAS (y no usa otro firewall basado en host en su lugar), las organizaciones aumenta la superficie de ataque de todo el entorno de Windows. Los firewalls perimetrales proporcionan alguna protección contra ataques que se dirigen directamente un entorno de Internet, pero no proporcionan ninguna protección frente a ataques que aprovechan otros vectores de ataque como [descargas](https://www.microsoft.com/security/sir/glossary/drive-by-download-sites.aspx) los ataques, o ataques que se originan en otros sistemas en peligro de la intranet.  
  
Configuración de Control de cuentas (UAC) del usuario se deshabilita a veces en los servidores porque el personal administrativo encontrar los mensajes molestos. Aunque [artículo de Microsoft Support 2526083](https://support.microsoft.com/kb/2526083) se describen escenarios en la que se puede deshabilitar UAC en Windows Server, a menos que se está ejecutando un servidor de instalación básica (cuando UAC está deshabilitado por diseño), no se debe deshabilitar UAC en los servidores sin haberlo e investigación.  
  
En otros casos, configuración del servidor está configurada para menos seguras valores porque las organizaciones aplican opciones de configuración de servidor obsoleto a nuevos sistemas operativos, como la aplicación de líneas de base de Windows Server 2003 a equipos que ejecutan Windows Server 2012, Windows Server 2008 R2 o Windows Server 2008, sin cambiar las líneas de base para reflejar los cambios en el sistema operativo. En lugar de llevar a líneas de base de servidor anterior a nuevos sistemas operativos, al implementar un nuevo sistema operativo, revise los cambios de seguridad y opciones de configuración para asegurarse de que la configuración implementada sea aplicable y adecuado para el nuevo sistema operativo.  
  
##### <a name="granting-excessive-privilege"></a>Conceder privilegios excesivos  
En casi todos los entornos, hemos evaluado, se concede el privilegio excesiva a las cuentas locales y basados en dominio en sistemas Windows. Se conceden derechos de administrador local en sus estaciones de trabajo, servidores miembro que ejecuta servicios que se configuran con derechos más allá de lo que necesitan para funcionar, los usuarios y grupos de administradores locales a través de la población de servidor contienen docenas o incluso cientos de cuentas locales y de dominio. Poner en peligro solo una cuenta con privilegios en un equipo que permite a los atacantes poner en peligro las cuentas de cada usuario y el servicio que inicia sesión en el equipo y en harvest y aprovechar las credenciales para propagar el riesgo a otros sistemas.  
  
Aunque pass-the-hash (PTH) y otros ataques de robo de credenciales son omnipresentes en la actualidad, es porque no hay herramientas disponibles de forma gratuita que simplifica el proceso y fácil extraer las credenciales de otras cuentas con privilegios cuando un atacante ha ganado administrador: o acceso de nivel de sistema a un equipo. Incluso sin las herramientas, que permite la recopilación de credenciales de inicio de sesión, un atacante con acceso con privilegios a un equipo puede instalar fácilmente los registradores de pulsaciones de teclas que capturan pulsaciones de teclas, capturas de pantalla y el contenido del Portapapeles. Un atacante con acceso con privilegios a un equipo puede deshabilitar el software antimalware, instalar rootkits, modificar archivos protegidos o instalar malware en el equipo que automatiza los ataques o convierte a un servidor en un [descargas](https://www.microsoft.com/security/sir/glossary/drive-by-download-sites.aspx) host.  
  
Varían las tácticas que se utilizan para extender una infracción más allá de un único equipo, pero la clave para propagar el riesgo es la adquisición de acceso con privilegios elevados a sistemas adicionales. Al reducir el número de cuentas con acceso con privilegios a cualquier sistema, reducir la superficie expuesta a ataques no solo de ese equipo, pero la probabilidad de que un atacante recolección valiosas credenciales desde el equipo.  
  
##### <a name="standardizing-local-administrator-credentials"></a>Estandarización de las credenciales de administrador Local  
Cuánto tiempo ha habido debate entre los expertos en seguridad como a si hay un valor en cambiar el nombre de las cuentas de administrador locales en los equipos de Windows. Lo realmente importante sobre cuentas de administrador locales es si están configuradas con el mismo nombre de usuario y contraseña en varios equipos.  
  
Si la cuenta de administrador local se denomina con el mismo valor a través de servidores y la contraseña asignada a la cuenta también se configura en el mismo valor, los atacantes pueden extraer las credenciales de la cuenta en un equipo en el acceso de administrador o nivel de sistema se ha obtenido. El atacante no tiene que inicialmente poner en peligro la cuenta de administrador; solo necesita poner en peligro la cuenta de un usuario que sea miembro del grupo Administradores local o de una cuenta de servicio que está configurada para ejecutarse como LocalSystem o con privilegios de administrador. El atacante puede extraer las credenciales de la cuenta de administrador y reproducir esas credenciales en los inicios de sesión de red a otros equipos de la red.  
  
Siempre que otro equipo tiene una cuenta local con el mismo nombre de usuario y contraseña (o hash de contraseña) como las credenciales de cuenta que se presentan, el intento de inicio de sesión se realiza correctamente y el atacante obtiene acceso con privilegios al equipo de destino. En las versiones actuales de Windows, es la cuenta predefinida Administrador [deshabilitada de forma predeterminada](https://technet.microsoft.com/library/cc753450.aspx), pero en los sistemas operativos heredados, la cuenta está habilitada de forma predeterminada.  
  
> [!NOTE]  
> Algunas organizaciones han configurado intencionadamente cuentas de administrador locales esté habilitada en la creencia de que esto proporciona un "seguro" en caso de que todas las demás cuentas con privilegios están bloqueados en un sistema. Sin embargo, incluso si la cuenta de administrador local está deshabilitada y no hay ninguna otra cuenta disponible que puede habilitar la cuenta o iniciar sesión en el sistema con privilegios de administrador, el sistema puede arrancar en modo seguro y el administrador local integrada cuenta se puede volver a habilitar, como se describe en [artículo de Microsoft Support 814777](https://support.microsoft.com/kb/814777). Además, si todavía correctamente, el sistema aplica los GPO, se puede modificar un GPO para volver a habilitar (temporalmente) la cuenta de administrador o grupos restringidos se pueden configurar para agregar una cuenta de dominio al grupo de administradores local. Se pueden realizar reparaciones y nuevo se puede deshabilitar la cuenta de administrador. Para evitar eficazmente un compromiso lateral que usa credenciales de cuenta de administrador locales integradas, las contraseñas y nombres de usuario único deben configurarse para las cuentas de administrador locales. Para implementar contraseñas únicas para las cuentas de administrador locales a través de un GPO, consulte [solución para la administración de la contraseña de la cuenta de administrador integrada a través de GPO](https://technet.microsoft.com/mt227395.aspx) en technet.  
  
##### <a name="permitting-installation-of-unauthorized-applications"></a>Permitir la instalación de aplicaciones no autorizadas  
*Ley número uno: Si un intruso puede persuadirle de ejecutar este programa en el equipo, ya no es solamente su equipo.* - [10 leyes inmutables de seguridad (versión 2.0)](https://technet.microsoft.com/security/hh278941.aspx)  
  
Si una organización implementa la configuración de línea base coherente entre servidores, no se debe permitir la instalación de aplicaciones que no forman parte del rol definido de un servidor. Al permitir la instalación de software que no forma parte de la funcionalidad de un servidor designado, los servidores se exponen a involuntario o malintencionado instalación de software que aumenta la superficie expuesta a ataques del servidor, que presenta vulnerabilidades de aplicaciones o hace que inestabilidad del sistema.  
  
#### <a name="applications"></a>Aplicaciones  
Como se describió anteriormente, las aplicaciones a menudo son instaladas y configuradas para usar las cuentas que se conceden que más privilegios que la aplicación realmente necesita. En algunos casos, documentación de la aplicación especifica que las cuentas de servicio deben ser miembros del grupo de administradores local del servidor o deben configurarse para ejecutarse en el contexto de la cuenta LocalSystem. Esto es a menudo no porque la aplicación requiere dichos derechos, pero dado que determinar qué derechos y permisos de necesidad de las cuentas de servicio de la aplicación requiere una inversión en más tiempo y esfuerzo. Si una aplicación no se instala con los privilegios mínimos necesarios para que la aplicación y sus características configurados funcionar, el sistema está expuesto a ataques que aprovechan los privilegios de las aplicaciones sin cualquier ataque contra el propio sistema operativo.  
  
### <a name="lack-of-secure-application-development-practices"></a>Falta de prácticas de desarrollo de aplicaciones seguras  
Existe en la infraestructura para admitir cargas de trabajo empresariales. Cuando se implementan estas cargas de trabajo en aplicaciones personalizadas, es fundamental para garantizar que las aplicaciones desarrolladas con recomendaciones segura. Análisis de causa raíz de los incidentes de toda la empresa suele revelar aquellos que se efectúe un compromiso inicial personalizada a través de aplicaciones, especialmente aquellos que están en Internet que enfrentan. La mayoría de estos riesgos se llevan a cabo a través de riesgo de ataques conocidos, como la inyección de SQL (detección) y ataques de scripting entre sitios (XSS).  
  
Inyección de código SQL es una vulnerabilidad de la aplicación que permite la entrada definido por el usuario modificar una instrucción SQL que se pasa a la base de datos para su ejecución. Esta entrada puede proporcionarse a través de un campo en la aplicación, un parámetro (por ejemplo, la cadena de consulta o una cookie) u otros métodos. El resultado de esta inserción es que la instrucción de SQL proporcionada para la base de datos es fundamentalmente diferente de lo que esperaba el desarrollador. Tomemos, por ejemplo, una consulta frecuente utilizada en la evaluación de una combinación de nombre y contraseña de usuario:  
  
`SELECT userID FROM users WHERE username = 'sUserName' AND password = 'sPassword'`  
  
Cuando esto se recibe el servidor de base de datos, indica al servidor para buscar a través de la tabla de usuarios y devolver cualquier registro userID donde el nombre de usuario y la contraseña coinciden con los proporcionados por el usuario (supuestamente a través de un formulario de inicio de sesión de algún tipo). Naturalmente en este caso la intención del desarrollador es devolver únicamente un registro válido si el usuario pueden proporcionar un nombre de usuario correcto y una contraseña. Si alguna no es correcta, el servidor de base de datos no se puede buscar un registro coincidente y devolver un resultado vacío.  
  
El problema se produce cuando un atacante hace algo inesperado, como proporcionar su propio SQL en lugar de datos válido. Dado que SQL es interpretada marcha por el servidor de base de datos, el código inyectado procesará como si el programador había puesto en sí mismo. Por ejemplo, si el atacante especificado **administrador** para el identificador de usuario y **xyz** o **1 = 1** como la contraseña, la instrucción resultante procesada por la base de datos sería:  
  
`SELECT userID FROM users WHERE username = 'administrator' AND password = 'xyz' OR 1=1`  
  
Cuando se procesa esta consulta en el servidor de base de datos, todas las filas de la tabla se devolverá en la consulta porque 1 = 1 siempre se evaluará como True, por lo tanto que no importa si se sabe o se proporciona el nombre de usuario correcto y la contraseña. El resultado neto en la mayoría de los casos es que el usuario, se registrará que el primer usuario en la base de datos del usuario; en la mayoría de los casos, será el usuario administrativo.  
  
Además de simplemente iniciar sesión en instrucciones SQL con formato incorrecto, como esto puede usarse para agregar, eliminar, cambiar los datos o incluso quitar tablas completas (eliminar) de una base de datos. En los casos más extremos donde se combina detección con privilegios excesivos, se pueden ejecutar comandos del sistema operativo para habilitar la creación de nuevos usuarios, para descargar herramientas de ataque o realizar otras acciones de los atacantes que elegir.  
  
En el scripting entre sitios, la vulnerabilidad se introdujo en la salida de la aplicación. Un ataque comienza por un atacante que proporciona los datos con formato incorrecto a la aplicación, pero en este caso los datos con formato incorrecto están en forma de código de scripting (por ejemplo, JavaScript) que se va a ejecutar el Explorador de la víctima. Vulnerabilidad de seguridad de una vulnerabilidad XSS puede permitir que un atacante ejecutan las funciones de la aplicación de destino en el contexto del usuario que inició el explorador. Los ataques XSS normalmente se inician mediante un correo electrónico de suplantación de identidad fomenta el usuario haga clic en un vínculo que se conecta a la aplicación y se ejecuta el código de ataque.  
  
A menudo, el XSS se aprovecha de banca en línea y escenarios de comercio electrónico donde un atacante puede realizar compras o transferencia de dinero en el contexto del usuario aprovechado. En el caso de un ataque de destino en una aplicación de administración de identidad personalizada basada en web, puede permitir que un atacante crear sus propias identidades, modificar permisos y derechos y poner en peligro sistémico.  
  
Aunque una discusión completa de inyección de código SQL y el scripting entre sitios está fuera del ámbito de este documento, el [Open Web Application Security Project (OWASP)](https://www.owasp.org/index.php/Main_Page) publica una lista de 10 principales con información detallada acerca de las vulnerabilidades y contramedidas.  
  
Independientemente de la inversión en infraestructura de seguridad, si se implementan las aplicaciones mal diseñadas y escritas dentro de esa infraestructura, componen el entorno sea vulnerable a ataques. A menudo infraestructuras incluso bien protegidas no proporcionan contramedidas eficaces a estos ataques en las aplicaciones. Para agravar el problema, las aplicaciones mal diseñadas pueden requerir que las cuentas de servicio se conceden permisos excesivos para que funcione la aplicación.  
  
El ciclo de vida de desarrollo de seguridad (SDL) de Microsoft es un conjunto de controles de proceso estructural que trabajan para mejorar el principio de seguridad al principio de los requisitos de recopilación y ampliación a través del ciclo de vida de la aplicación hasta que se está dado de baja. Esta integración de controles de seguridad vigentes solo no es crítica desde una perspectiva de seguridad, es fundamental para garantizar que la seguridad de la aplicación es costo y programar efectivo. Evaluar una aplicación para problemas de seguridad cuando está eficazmente todo el código requiere que las organizaciones a tomar decisiones sobre seguridad de la aplicación solo antes o después de la aplicación se ha implementado. Puede elegir una organización abordar los errores de aplicación antes de implementar la aplicación en producción, incurrir en costes y los retrasos, o la aplicación puede implementarse en producción con problemas de seguridad conocidos, la exposición de la organización para poner en peligro.  
  
Algunas organizaciones dan el costo total de corregir un problema de seguridad en el código de producción por encima de 10 000 USD por cada problema y las aplicaciones desarrolladas sin un eficaz SDL pueden calcular el promedio de problemas de alta gravedad más de diez por 100.000 líneas de código. En las aplicaciones grandes, los costos de escalar rápidamente. Por el contrario, muchas compañías establecen un punto de referencia de menos de un problema por 100.000 líneas de código en la fase de revisión de código final del SDL y el objetivo es cero los problemas de aplicaciones de alto riesgo en producción.  
  
Implementar el SDL mejora la seguridad mediante la inclusión de los requisitos de seguridad al principio de la recopilación de requisitos y diseño de una aplicación proporciona modelado de riesgos para aplicaciones de alto riesgo; requiere aprendizaje eficaz y la supervisión de los desarrolladores; y claro, requiere código coherente estándares y procedimientos recomendados. El efecto neto de SDL es importantes mejoras en seguridad de la aplicación al tiempo que reduce el costo de desarrollar, implementar, mantener y dar de baja de una aplicación. Aunque una discusión detallada del diseño y la implementación de SDL queda fuera del ámbito de este documento, consulte el [Microsoft Security Development Lifecycle](https://www.microsoft.com/security/sdl/default.aspx) para obtener instrucciones detalladas e información.  
  


